_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"8oxB":function(e,t){var n,r,c=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,u=[],l=!1,f=-1;function h(){l&&a&&(l=!1,a.length?u=a.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=s(h);l=!0;for(var t=u.length;t;){for(a=u,u=[];++f<t;)a&&a[f].run();f=-1,t=u.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=m,c.addListener=m,c.once=m,c.off=m,c.removeListener=m,c.removeAllListeners=m,c.emit=m,c.prependListener=m,c.prependOnceListener=m,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},Qetd:function(e,t,n){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},SksO:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},W8MJ:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},WkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},ZhPi:function(e,t,n){var r=n("WkPL");e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},cDf5:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},lwsE:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},obeH:function(e,t,n){"use strict";n.r(t);var r=n("ODXe"),c=n("KQm4"),o=n("T5bk"),i=n("nKUr"),s=n("q1tI"),a=n("8Kt/"),u=n.n(a),l=n("jifJ"),f=n.n(l),h=n("lPiR"),p=n.n(h),d=n("562I"),m=n.n(d),j=function(e){return m()(p()(e).toString().slice(0,8))},b=function(e){return""===e.replace(/^\s+/,"").replace(/\s+$/,"")},v="-".repeat((new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).length),g=/((?:ftp|http|https):\/\/(?:\w+:{0,1}\w*@)?(?:\S+)(?::[0-9]+)?(?:\/|\/(?:[\w#!:.?+=&%@!-/]))?)/,O=function(e){for(var t=e.split(g),n=1;n<t.length;n+=2)t[n]=Object(i.jsx)("a",{href:"".concat(t[n]),target:"_blank",rel:"noreferrer",style:{color:"#bbf",fontWeight:"bold"},children:t[n]},"link"+n);return t},x=Object(s.memo)((function(e){var t=e.message,n=t.name,r=t.trip,c=t.content,o=t.time,a=t.active,u=Object(s.useState)(v),l=u[0],f=u[1];Object(s.useEffect)((function(){f(new Date(o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}),[o]);var h=Object(s.useState)([]),p=h[0],d=h[1];Object(s.useEffect)((function(){d(c.replace(/^\s+|\s+$/g,"").replace(/ {2}/g," \xa0").split("\n").map(O))}),[c]);var m=Object(s.useState)("#FFFFFF"),j=m[0],b=m[1];Object(s.useEffect)((function(){b(T(r))}),[r]);var g=n&&n.length>0?n:r,x=Object(i.jsxs)("span",{className:"tooltip",style:{color:j},children:[Object(i.jsx)("span",{style:{background:a?"".concat(j,"55"):"inherit"},children:g}),Object(i.jsx)("span",{className:"tooltiptext",children:r})]});return Object(i.jsxs)("div",{className:"message",children:[Object(i.jsxs)("div",{className:"meta",children:[Object(i.jsx)("span",{className:"time",children:l})," ",x,"\xa0"]}),Object(i.jsx)("div",{className:"content",children:p.map((function(e,t){return Object(i.jsxs)("div",{className:"text",children:[e,Object(i.jsx)("br",{})]},t)}))})]})})),y=function(e){var t=e.onMessageSubmit,n=Object(s.useState)(""),r=n[0],c=n[1];return Object(i.jsx)("textarea",{className:"messageInput preventToggle",placeholder:"Say something",value:r,onChange:function(e){c(e.target.value)},onKeyDown:function(e){if(13===e.keyCode&&!1===e.shiftKey){if(e.preventDefault(),b(r))return;c(""),t(e,r)}}})},w=function(e){var t=e.connections;return Object(i.jsxs)("div",{className:"connectionsBox",children:[Object(i.jsx)("div",{style:{textAlign:"center",borderBottom:"thin solid green",paddingBottom:"0.5em",marginBottom:"0.5em"},children:"Connections"}),Object.keys(t).map((function(e,n){var r=t[e];return Object(i.jsxs)("div",{className:"connection",children:[Object(i.jsx)("div",{className:"connectionName",style:{color:T(r.trip)},children:r.name}),Object(i.jsx)("div",{className:"connectionTrip",children:r.trip})]},n)}))]})},T=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t),t&=t;for(var r="#",c=0;c<3;c++){var o=t>>8*c&255;r+=("00"+(o|=80).toString(16)).substr(-2)}return r};t.default=function(){var e=Object(s.useState)(null),t=e[0],n=e[1],a=Object(s.useState)(""),l=a[0],h=a[1],p=Object(s.useState)([]),d=p[0],m=p[1],v=Object(s.useState)({}),g=v[0],O=v[1],N=Object(s.useState)(""),S=N[0],_=N[1];Object(s.useEffect)((function(){n(f()("https://chat.soma.cx",{path:"/socket.io/",withCredentials:!0}))}),[]),Object(s.useEffect)((function(){if(null!==t)return t.on("connected",(function(e){var t=e.id,n=e.chat,r=e.connections;console.log("You connected with connection ID =",t),h(t),O(r),m(n)})),t.on("user left",(function(e){var t=e.id,n=e.connections;console.log("User ".concat(t," left.")),O(n)})),t.on("message",(function(e){var t=e.packet,n=e.connections;m((function(e){return[].concat(Object(c.a)(e),[t])})),O(n)})),t.on("wipe old messages",(function(e){var t=e.chat;m(Object(c.a)(t))})),function(){t.emit("leave")}}),[t]);var k=function(e,t){var n="anon",r=b(t)?j(e):j(t);if(t.includes("#")){var c=t.split("#"),i=Object(o.a)(c),s=i[0],a=i.slice(1).join("#");n=b(s)?n:s,r=b(a)?j(e):j(a)}return{name:n,trip:r}}(l,S),E=k.name,L=k.trip;return t&&!1!==t.connected?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(u.a,{children:[Object(i.jsx)("title",{children:"somachat"}),Object(i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"},"direct")]}),Object(i.jsxs)("div",{className:"chat",children:[Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("div",{className:"txt",children:"/chat - tripcode chat"}),Object(i.jsxs)("div",{className:"generator",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{style:{color:T(L)},children:E})," ",L,"\xa0"]}),Object(i.jsx)("input",{className:"secretInput preventToggle",placeholder:"name#secret (optional)",onChange:function(e){var t=e.target.value;if("#"===t[t.length-1]&&!t.slice(0,t.length-1).includes("#")&&t.length-1>10){var n=t.split("");n.splice(10,n.length-10),t=n.join("")+"#"}if(t.includes("#")){var c=t.split("#");if(Object(r.a)(c,1)[0].length>10)return}_(t)},value:S})]})]}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{className:"theFlex",children:[Object(i.jsx)("div",{className:"messages",children:Object(c.a)(d).reverse().map((function(e){return Object(i.jsx)(x,{message:e},"".concat(l,":").concat(e.time))}))}),Object(i.jsx)(w,{connections:g})]}),Object(i.jsx)(y,{onMessageSubmit:function(e,n){t.emit("message",{secret:S,content:n})}})]})]}):Object(i.jsx)("div",{style:{padding:"1em"},children:"Chat is down..."})}},wuLQ:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return n("obeH")}])},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n}},[["wuLQ",0,1,6,5,7]]]);